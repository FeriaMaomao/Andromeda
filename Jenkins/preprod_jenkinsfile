pipeline {
	options {
		ansiColor('gnome-terminal')
	}

	agent any

	stages {

		stage('Prepare Stage') {
			steps {
				sh 'docker -v'
                sh 'docker-compose -v'
			}
		}
        
        stage('Clone Repo') {
			steps {
				checkout scm
			}
		}

        stage('Pull Change') {
			steps {
				sh 'cd /home/torrescardenaslina/preprod/andromeda_inventory && git checkout . && git pull'
			}
		}

        stage('Run Build Docker') {
			steps {
				sh 'cd /home/torrescardenaslina/preprod/andromeda_inventory/Docker/PreProd && docker-compose up -d'
			}
		}
        
        stage('Deploy') {
			steps {
				sh 'docker restart andromeda_preprod'
			}
		}
    }
}
